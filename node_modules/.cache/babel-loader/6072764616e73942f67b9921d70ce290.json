{"ast":null,"code":"var _jsxFileName = \"/Users/tweecezor/Desktop/nodeJS/src/components/Profile/Profile.jsx\";\nimport React, { PureComponent } from 'react';\nimport { compose } from 'recompose';\nimport { connect } from 'react-redux';\nimport { Container, Typography, Avatar, Grid, Paper, Button, TextField, CardActions } from '@material-ui/core';\nimport AspectRatio from 'react-aspect-ratio';\nimport PasswordInput from '../common/PasswordInput';\nimport { withStyles } from '@material-ui/styles';\nimport { userProfileSelector, saveProfile, isLoadingUserProfileSelector } from '../../store/auth';\n\nconst styles = theme => ({\n  wrapper: {\n    width: '100%',\n    flex: '1 1 100%',\n    paddingTop: '40px'\n  },\n  formCard: {\n    padding: theme.spacing(2)\n  },\n  avatarPreview: {\n    width: '100%',\n    height: '100%',\n    borderRadius: '8px'\n  },\n  avatarPreviewWrapper: {\n    marginBottom: theme.spacing(2),\n    width: '100%'\n  },\n  uploadButton: {\n    display: 'block',\n    textAlign: 'center'\n  },\n  form: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    marginBottom: theme.spacing(3)\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: 200\n  },\n  formActions: {\n    marginTop: 'auto',\n    padding: 0\n  }\n});\n\nclass Profile extends PureComponent {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      firstName: '',\n      middleName: '',\n      surName: '',\n      oldPassword: '',\n      newPassword: '',\n      confirmPassword: '',\n      image: '',\n      fileRef: React.createRef()\n    };\n\n    this.cancelHandler = () => {\n      const userProfile = this.props.userProfile;\n      this.setState({\n        firstName: userProfile.firstName,\n        middleName: userProfile.middleName,\n        surName: userProfile.surName,\n        oldPassword: '',\n        newPassword: '',\n        confirmPassword: '',\n        image: userProfile.image\n      });\n    };\n\n    this.handleChange = event => {\n      const _event$target = event.target,\n            name = _event$target.name,\n            value = _event$target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleChangeFile = () => {\n      const fileRef = this.state.fileRef;\n      const reader = new FileReader();\n\n      reader.onload = e => {\n        this.setState({\n          image: e.target.result\n        });\n      };\n\n      fileRef.current.files[0] && reader.readAsDataURL(fileRef.current.files[0]);\n    };\n\n    this.submitHandler = () => {\n      const dispatch = this.props.dispatch;\n      const _this$state = this.state,\n            firstName = _this$state.firstName,\n            surName = _this$state.surName,\n            middleName = _this$state.middleName,\n            oldPassword = _this$state.oldPassword,\n            newPassword = _this$state.newPassword,\n            fileRef = _this$state.fileRef;\n      dispatch(saveProfile({\n        firstName,\n        surName,\n        middleName,\n        oldPassword,\n        newPassword,\n        avatar: fileRef.current.files[0] || null\n      })).then(() => {\n        this.cancelHandler();\n      });\n    };\n  }\n\n  componentDidMount() {\n    const userProfile = this.props.userProfile;\n    this.setState({\n      firstName: userProfile.firstName,\n      middleName: userProfile.middleName,\n      surName: userProfile.surName,\n      image: userProfile.image\n    });\n  }\n\n  render() {\n    const _this$props = this.props,\n          classes = _this$props.classes,\n          isLoading = _this$props.isLoading;\n    const _this$state2 = this.state,\n          firstName = _this$state2.firstName,\n          surName = _this$state2.surName,\n          middleName = _this$state2.middleName,\n          oldPassword = _this$state2.oldPassword,\n          newPassword = _this$state2.newPassword,\n          confirmPassword = _this$state2.confirmPassword,\n          image = _this$state2.image,\n          fileRef = _this$state2.fileRef;\n    return React.createElement(\"div\", {\n      className: classes.wrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(Paper, {\n      className: classes.formCard,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      spacing: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      xs: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(AspectRatio, {\n      className: classes.avatarPreviewWrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(Avatar, {\n      className: classes.avatarPreview,\n      src: image || '/assets/img/no-user-image-big.png',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    })), React.createElement(Button, {\n      className: classes.uploadButton,\n      variant: \"contained\",\n      component: \"label\",\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\", React.createElement(\"input\", {\n      type: \"file\",\n      style: {\n        display: 'none'\n      },\n      ref: fileRef,\n      onChange: this.handleChangeFile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }))), React.createElement(Grid, {\n      item: true,\n      xs: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      direction: \"column\",\n      style: {\n        height: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      variant: \"h4\",\n      component: \"h2\",\n      gutterBottom: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, \"\\u041E\\u0431\\u0449\\u0430\\u044F \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F\"), React.createElement(\"div\", {\n      className: classes.form,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      label: \"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\",\n      className: classes.textField,\n      margin: \"normal\",\n      name: \"surName\",\n      value: surName,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      label: \"\\u0418\\u043C\\u044F\",\n      className: classes.textField,\n      margin: \"normal\",\n      name: \"firstName\",\n      value: firstName,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      label: \"\\u041E\\u0442\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\",\n      className: classes.textField,\n      margin: \"normal\",\n      name: \"middleName\",\n      value: middleName,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    })), React.createElement(Typography, {\n      variant: \"h4\",\n      component: \"h2\",\n      gutterBottom: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"), React.createElement(\"div\", {\n      className: classes.form,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(PasswordInput, {\n      label: \"\\u0421\\u0442\\u0430\\u0440\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n      className: classes.textField,\n      name: \"oldPassword\",\n      value: oldPassword,\n      handleChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }), React.createElement(PasswordInput, {\n      label: \"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n      className: classes.textField,\n      name: \"newPassword\",\n      value: newPassword,\n      handleChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }), React.createElement(PasswordInput, {\n      label: \"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044F\",\n      className: classes.textField,\n      name: \"confirmPassword\",\n      value: confirmPassword,\n      handleChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    })), React.createElement(CardActions, {\n      className: classes.formActions,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"primary\",\n      variant: \"contained\",\n      disabled: isLoading,\n      onClick: this.submitHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"), React.createElement(Button, {\n      variant: \"outlined\",\n      onClick: this.cancelHandler,\n      disabled: isLoading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, \"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C\"))))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  userProfile: userProfileSelector(state),\n  isLoading: isLoadingUserProfileSelector(state)\n});\n\nexport default compose(withStyles(styles), connect(mapStateToProps))(Profile);","map":{"version":3,"sources":["/Users/tweecezor/Desktop/nodeJS/src/components/Profile/Profile.jsx"],"names":["React","PureComponent","compose","connect","Container","Typography","Avatar","Grid","Paper","Button","TextField","CardActions","AspectRatio","PasswordInput","withStyles","userProfileSelector","saveProfile","isLoadingUserProfileSelector","styles","theme","wrapper","width","flex","paddingTop","formCard","padding","spacing","avatarPreview","height","borderRadius","avatarPreviewWrapper","marginBottom","uploadButton","display","textAlign","form","flexWrap","textField","marginLeft","marginRight","formActions","marginTop","Profile","state","firstName","middleName","surName","oldPassword","newPassword","confirmPassword","image","fileRef","createRef","cancelHandler","userProfile","props","setState","handleChange","event","target","name","value","handleChangeFile","reader","FileReader","onload","e","result","current","files","readAsDataURL","submitHandler","dispatch","avatar","then","componentDidMount","render","classes","isLoading","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport { compose } from 'recompose';\nimport { connect } from 'react-redux';\nimport {\n  Container,\n  Typography,\n  Avatar,\n  Grid,\n  Paper,\n  Button,\n  TextField,\n  CardActions\n} from '@material-ui/core';\nimport AspectRatio from 'react-aspect-ratio';\nimport PasswordInput from '../common/PasswordInput';\nimport { withStyles } from '@material-ui/styles';\nimport { userProfileSelector, saveProfile, isLoadingUserProfileSelector } from '../../store/auth';\n\nconst styles = theme => ({\n  wrapper: {\n    width: '100%',\n    flex: '1 1 100%',\n    paddingTop: '40px'\n  },\n  formCard: {\n    padding: theme.spacing(2)\n  },\n  avatarPreview: {\n    width: '100%',\n    height: '100%',\n    borderRadius: '8px'\n  },\n  avatarPreviewWrapper: {\n    marginBottom: theme.spacing(2),\n    width: '100%'\n  },\n  uploadButton: {\n    display: 'block',\n    textAlign: 'center'\n  },\n  form: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    marginBottom: theme.spacing(3)\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: 200\n  },\n  formActions: {\n    marginTop: 'auto',\n    padding: 0\n  }\n});\n\nclass Profile extends PureComponent {\n  state = {\n    firstName: '',\n    middleName: '',\n    surName: '',\n    oldPassword: '',\n    newPassword: '',\n    confirmPassword: '',\n    image: '',\n    fileRef: React.createRef()\n  };\n\n  componentDidMount() {\n    const { userProfile } = this.props;\n    this.setState({\n      firstName: userProfile.firstName,\n      middleName: userProfile.middleName,\n      surName: userProfile.surName,\n      image: userProfile.image\n    });\n  }\n\n  cancelHandler = () => {\n    const { userProfile } = this.props;\n    this.setState({\n      firstName: userProfile.firstName,\n      middleName: userProfile.middleName,\n      surName: userProfile.surName,\n      oldPassword: '',\n      newPassword: '',\n      confirmPassword: '',\n      image: userProfile.image\n    });\n  };\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  handleChangeFile = () => {\n    const { fileRef } = this.state;\n\n    const reader = new FileReader();\n\n    reader.onload = e => {\n      this.setState({ image: e.target.result });\n    };\n\n    fileRef.current.files[0] && reader.readAsDataURL(fileRef.current.files[0]);\n  };\n\n  submitHandler = () => {\n    const { dispatch } = this.props;\n    const { firstName, surName, middleName, oldPassword, newPassword, fileRef } = this.state;\n    dispatch(\n      saveProfile({\n        firstName,\n        surName,\n        middleName,\n        oldPassword,\n        newPassword,\n        avatar: fileRef.current.files[0] || null\n      })\n    ).then(() => {\n      this.cancelHandler();\n    });\n  };\n\n  render() {\n    const { classes, isLoading } = this.props;\n    const {\n      firstName,\n      surName,\n      middleName,\n      oldPassword,\n      newPassword,\n      confirmPassword,\n      image,\n      fileRef\n    } = this.state;\n    return (\n      <div className={classes.wrapper}>\n        <Container>\n          <Paper className={classes.formCard}>\n            <Grid container spacing={2}>\n              <Grid item xs={4}>\n                <AspectRatio className={classes.avatarPreviewWrapper}>\n                  <Avatar\n                    className={classes.avatarPreview}\n                    src={image || '/assets/img/no-user-image-big.png'}\n                  ></Avatar>\n                </AspectRatio>\n                <Button\n                  className={classes.uploadButton}\n                  variant=\"contained\"\n                  component=\"label\"\n                  color=\"primary\"\n                >\n                  Выбрать файл\n                  <input\n                    type=\"file\"\n                    style={{ display: 'none' }}\n                    ref={fileRef}\n                    onChange={this.handleChangeFile}\n                  />\n                </Button>\n              </Grid>\n              <Grid item xs={8}>\n                <Grid container direction=\"column\" style={{ height: '100%' }}>\n                  <Typography variant=\"h4\" component=\"h2\" gutterBottom>\n                    Общая информация\n                  </Typography>\n                  <div className={classes.form}>\n                    <TextField\n                      label=\"Фамилия\"\n                      className={classes.textField}\n                      margin=\"normal\"\n                      name=\"surName\"\n                      value={surName}\n                      onChange={this.handleChange}\n                    />\n                    <TextField\n                      label=\"Имя\"\n                      className={classes.textField}\n                      margin=\"normal\"\n                      name=\"firstName\"\n                      value={firstName}\n                      onChange={this.handleChange}\n                    />\n                    <TextField\n                      label=\"Отчество\"\n                      className={classes.textField}\n                      margin=\"normal\"\n                      name=\"middleName\"\n                      value={middleName}\n                      onChange={this.handleChange}\n                    />\n                  </div>\n                  <Typography variant=\"h4\" component=\"h2\" gutterBottom>\n                    Пароль\n                  </Typography>\n                  <div className={classes.form}>\n                    <PasswordInput\n                      label=\"Старый пароль\"\n                      className={classes.textField}\n                      name=\"oldPassword\"\n                      value={oldPassword}\n                      handleChange={this.handleChange}\n                    />\n                    <PasswordInput\n                      label=\"Новый пароль\"\n                      className={classes.textField}\n                      name=\"newPassword\"\n                      value={newPassword}\n                      handleChange={this.handleChange}\n                    />\n                    <PasswordInput\n                      label=\"Подтверждение пароля\"\n                      className={classes.textField}\n                      name=\"confirmPassword\"\n                      value={confirmPassword}\n                      handleChange={this.handleChange}\n                    />\n                  </div>\n                  <CardActions className={classes.formActions}>\n                    <Button\n                      color=\"primary\"\n                      variant=\"contained\"\n                      disabled={isLoading}\n                      onClick={this.submitHandler}\n                    >\n                      Сохранить\n                    </Button>\n                    <Button variant=\"outlined\" onClick={this.cancelHandler} disabled={isLoading}>\n                      Сбросить\n                    </Button>\n                  </CardActions>\n                </Grid>\n              </Grid>\n            </Grid>\n          </Paper>\n        </Container>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  userProfile: userProfileSelector(state),\n  isLoading: isLoadingUserProfileSelector(state)\n});\n\nexport default compose(\n  withStyles(styles),\n  connect(mapStateToProps)\n)(Profile);\n"]},"metadata":{},"sourceType":"module"}